function n({tag:n,t,text:o,o:s,i:c}={},r=[]){const e=document.createElement(n||"div");t&&(Array.isArray(t)||(t=t.split(" ")),e.classList.add(...t.filter(Boolean)));for(let i of r)i&&e.append(i);return s&&(e.innerHTML+=s),o&&e.append(o),c&&e.addEventListener("click",c),e}function t(t,o=[]){return n({tag:"button",...t},o)}function o(n){n.style.transform=""}const s=new class{u={};subscribe(n,t){this.u[n]||(this.u[n]=[]),this.u[n].push(t)}unsubscribe(n,t){if(!this.u[n])return;const o=this.u[n].indexOf(t);o>=0&&this.u[n].splice(o,1)}l(n,t){this.u[n]&&this.u[n].forEach(n=>n(t))}},c=[,,,,,,,,3,0],r=Object.values({m:4,C:5,h:6,p:7}),e=Object.values({v:8,M:9});function i(n){return r.includes(n)}function u(n){return e.includes(n)}const a=[...r,...e],f=1,l=2,w=3,d="B",m=Object.values({S:0,P:1,O:2,k:3}),C=m.filter(n=>0!==n);function h(n){return C.includes(n)}function p(n,t){return n.A===t.A&&n.L===t.L}function v(n,t){return[n.A-t.A,n.L-t.L]}function y(n,t){const[o,s]=v(n,t);return[Math.abs(o),Math.abs(s)]}const b=[[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1]],x={4:[-1,0],7:[0,1],5:[1,0],6:[0,-1]},M=Object.values(x);function g(n,t=0){return(t?b:M).map(t=>S(n,t))}function S(n,[t,o]){return{A:n.A+t,L:n.L+o}}function P(n,t){const[o,s]=v(t,n);for(let[c,[r,e]]of Object.entries(x))if(o===r&&s===e)return c;return null}function O(n,t){return S(n,x[t])}function k(n){return new Promise(t=>setTimeout(t,n))}async function A(n){if(!(n<0))return await k(n),new Promise(n=>requestAnimationFrame(()=>n()))}const L="mxlle13";function I(n,t){localStorage.setItem(L+"."+n,t)}function D(n){return localStorage.getItem(L+"."+n)}function $(n){return{0:"E",3:"R",2:"T",1:"Y"}[n]}const T={};function j(t){return T[t]??=n({t:"t"},[n({t:["W",E(t)&&"E"],o:'<svg xmlns="http://www.w3.org/2000/svg" color="#ff2ea6" viewBox="0 0 500 500"><path d="M340 25c-24 10-21 53-49 50-23-6-46-5-68 1-23-6-17-47-42-47-12 16-10 38-17 56-7 33-20 69-5 102 5 19 26 30 30 47-5 23-25 39-31 62-10 22-17 45-24 68-28-13-51-41-48-73-4-23 27-35 24-58-20-16-47 15-55 34-19 51 10 111 56 137 21 8 26 31 34 49 15 20 43 22 66 20 44-2 90 3 134-3 32-12 42-51 38-81-4-57-27-109-54-158 18-20 39-41 40-70 3-42-15-81-21-122-2-5-4-10-8-14Z"/><path d="m378 157 64-14 1 6-63 14zM378 170l67 3v5l-67-3zM145 157l-64-13-2 4 65 14zM144 170l-66 3v5l66-3z"/><ellipse cx="312" cy="145" fill="currentColor" rx="28" ry="22"/><ellipse cx="312" cy="145.1" rx="7" ry="19"/><ellipse cx="216" cy="145" fill="currentColor" rx="28" ry="22"/><ellipse cx="216" cy="145.1" rx="7" ry="19"/></svg>'})])}function E(n){return 0===n}function W(n){return m.includes(n)}const z=Object.values({I:4,D:5,$:6}),N={A:0,L:0};function R(n){return z.includes(n)}function U(n){return 4===n}const q={};function B(n){return{A:Math.floor((n-1)/2),L:Math.floor((n-1)/2)}}const H=[,,,,"⏳🌜","⏳5!"];function _(n){return n[Math.floor(Math.random()*n.length)]}const V={0:"Start",1:"New game",5:"Try again",25:"Retries",2:"Continue",3:"Difficulty",4:"Moves",6:"What would you like to add next?",7:"New action",8:"New rule",9:"Kitten personality",10:"Will run to the moon",11:"Will run around the tree",12:"Will run to the water",13:"Lures the kittens closer",14:"Do nothing",15:"Once the moon sets, darkness falls",16:"Unite all kittens before the moon sets!",17:"...",18:"Your choice",19:"United!",20:"Oh no!",21:"Meow",22:"Wait",23:"Loading...",24:"Hint",26:"",27:"Skip tutorial",28:" ",29:" ",30:"Share/load game"};function Y(n){return document.documentElement.setAttribute("lang","en"),V[n]}const F=[...C,...e,...Object.values({T:4,j:5})];function G(n){return tn().includes(n)}function K(){return G(4)}function Z(){return K()}function Q(){return G(5)}const J=[,12,11,10,15,16,,,13,14],X={3:[4],1:[8],9:[2],5:[4,8,9]};let nn;function tn(){return void 0===nn&&(nn=D("k")?.split(",").map(Number)??[]),nn}function on(){const n=tn();return F.filter(t=>!n.includes(t)).filter(t=>!X[t]||X[t].every(t=>n.includes(t)))}function sn(){return on().length>0}function cn(n){return 8===n?"💬 "+Y(21):"💤 "+Y(22)}function rn(n){let t,o,s;for(s=n.length-1;s>0;s--)t=Math.floor(Math.random()*(s+1)),o=n[s],n[s]=n[t],n[t]=o;return n}function en(n){return Array.from({length:n},()=>"●").join("")}function un(n,t){const o=n.W[0];return o?u(t)?G(t)?0===Hn(n,t):0:Bn(n,O(o,t),0):0}function an(n,t,o){const s=n.W[t];return p(s,o)?s:g(s).filter(o=>Bn(n,o,t)).sort((n,t)=>{const[s,c]=y(n,o),[r,e]=y(t,o),i=s+c,u=r+e;return i===u?Math.max(s,c)-Math.max(r,e)||n.A-t.A||n.L-t.L:i-u})[0]??s}function fn(n,t,o,s){const c={...n.W[t]};if(!G(t))return c;let r={...c};switch(t){case 3:r=function(n){const t=n.W[4];return t?an(n,3,t):n.W[3]}(n);break;case 2:r=function(n){const t=n.W[2],o=n.W[5];if(o){const s=g(o,1),c=s.findIndex(n=>p(n,t));return-1!==c?s[(c+1)%s.length]:an(n,2,o)}}(n);break;case 1:r=function(n){const t=n.W[6];return t?an(n,1,t):n.W[1]}(n)}return p(r,o)&&p(c,s)&&(r=c),r}function ln(n,t){const o=n.W[0];if(!o)return n.W;const s=Nn(n,o),c=Rn(n,o);let r;if(u(t)&&(r=function(n,t){const o=Tn(n.W),s=n.W[0];if(8===t){const t=Rn(n,s);for(const c of t)o[c]=an(n,c,s)}return o}(n,t)),8!==t){if(r=Tn(n.W),i(t)){r[0]=function(n,t,o){const s=O(n.W[0],o);return Bn(n,s,0)?s:n.W[0]}(n,0,t);for(const n of s)r[n]={...r[0]}}for(const t of c)r[t]=fn(n,t,o,r[0])}return r[4]=function(n){const t=n.W[4];if(!t||!K())return t;const o=n.R.N;return t&&t.L<o?{...t,L:t.L+1}:t}(n),r}let wn=1;const dn=42;function mn(n,t={U:0}){const o=Cn(kn(n),t),s=function(n,t){const o=t.B.length;return o<=1?3:o<8?2:1}(0,o);return{H:o.H,B:rn(o.B),_:s}}function Cn(n,t){const o=n.V;if(0===o.length?wn=1:wn++,Wn(n))return{H:0,B:[o]};if(zn(n)||o.length>=5)return{H:dn,B:[o]};let s={H:dn,B:[]};for(const c of function(n){return[...a].filter(t=>un(n,t))}(n)){if(!un(n,c))continue;const r=En(n);r.V=[...o,c],r.W=Tn(ln(r,c));const e=Cn(r,t),i=e.H+1;s.H=Math.min(i,s.H),i<dn&&(t.U||i===s.H)?s.B=[...s.B,...e.B]:i<dn&&(s.B=[...e.B])}return o.length,s}const hn=D("o"),pn={Y:void 0,F:hn?Number(hn):0,G:void 0,K:void 0,language:"en",Z:0},vn="🟣0🔵0🟢0🟡0🌙0🌳0💧".split(0);function yn(n,t){const o=$n();o[4]={...N};for(let r=0;r<n.length;r+=4){const t=n.slice(r,r+2),s=Object.entries(vn).find(([,n])=>n===t)?.[0];o[s]={A:+n.charAt(r+2),L:+n.charAt(r+3)}}t?.J&&(o[4]=null);const s={N:5,X:o,B:[]};if(t?.nn)return s;const c=mn(s,{U:1});return{...s,B:c.B,_:c._}}function bn(){return-1!==pn.F}const xn=["🟣11🟡21🟢21🔵21","🟣12🟡32🟢31🔵32🌳22💧21","🟣11🟡32🟢31🔵33🌳23💧21🌙12"],Mn=[3,4,5];let gn;function Sn(){if(gn)return gn;const n=yn(xn[2],{nn:1});return gn=n.X,gn}function Pn(t){return R(t)?function(t){return q[t]??=function(t){const o=n({t:"y"}),s=n({t:""+{5:"J",6:"K",4:"L"}[t]});return o.append(s),o}(t)}(t):j(t)}function On(n,t){return R(t)?bn()?n.X[t]:U(t)&&!Z()?null:Sn()[t]:B(n.N)}function kn(n){return{R:n,W:Tn(n.X),V:[]}}function An(n){return n?Ln(n.R):null}function Ln(n){const t=n.N,o=n.X[4];return o?t-o.L:dn}function In(n,t){return n.N-t}const Dn=[...m,...z];function $n(){return Dn.reduce((n,t)=>(n[t]=null,n),{})}function Tn(n){return Dn.reduce((t,o)=>(t[o]=n[o]?{...n[o]}:null,t),{})}function jn(n){return{N:n.N,X:Tn(n.X),B:n.B.map(n=>[...n])}}function En(n){return{R:jn(n.R),W:Tn(n.W),V:[...n.V]}}function Wn(n){if(!n)return 0;const t=n.W[0];return C.every(o=>{const s=n.W[o];return p(t,s)})}function zn(n){return n&&Q()?n.V.length>=An(n)&&!Wn(n):0}function Nn(n,t){return C.filter(o=>p(n.W[o],t))}function Rn(n,t){return C.filter(o=>!p(n.W[o],t))}function Un(n){return qn(n.N).filter(t=>function(n,t){return Object.values(t.X).filter(Boolean).every(t=>!p(t,n))}(t,n))}function qn(n){const t=[];for(let o=0;o<n;o++)for(let s=0;s<n;s++)t.push({A:o,L:s});return t}function Bn(n,t,o){if(!function(n,t){const{A:o,L:s}=n;return o>=0&&o<t&&s>=0&&s<t}(t,n.R.N))return 0;const s=n.W[5],c=n.W[6];if(s&&p(t,s))return 0;const r=!!c&&p(t,c),e=W(o)&&E(o);return!r||!e}function Hn(n,t){const o=c[t],s=n.V.lastIndexOf(t),r=-1===s?0:o-(n.V.length-s);return Math.max(0,r)}let _n=new Set;function Vn(t,o,s){const c=function(t){return n({t:["m"],text:t})}(o);_n.add(c);const r=t.getBoundingClientRect();c.style.left=r.left+r.width/2+"px",c.style.top=r.top-c.offsetHeight+"px",document.body.appendChild(c),setTimeout(()=>c.classList.add("Q"),1),s&&setTimeout(()=>Fn(c),s)}function Yn(){for(const n of _n)Fn(n)}function Fn(n){_n.delete(n),n.classList.remove("Q"),n.addEventListener("transitionend",()=>{n.remove()})}let Gn=0;const Kn={tn:"c",left:"v",sn:"b",cn:"n"},Zn={4:Kn.sn,5:Kn.cn,6:Kn.left,7:Kn.right};function Qn(t){const o=n({t:`${Kn.tn} ${Zn[t]}`});return o.innerHTML='<svg fill="currentColor" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><path d="M133 231a8 8 0 0 1-5-7v-40H48a16 16 0 0 1-16-16V88a16 16 0 0 1 16-16h80V32a8 8 0 0 1 14-6l96 96a8 8 0 0 1 0 12l-96 96a8 8 0 0 1-9 1Z"/></svg>',o}function Jn(n,t){n.classList.remove(...Object.values(Zn)),n.classList.add(Zn[t])}const Xn={[f]:0,[l]:1,[w]:3};function nt(){const n=D("x");return n?parseInt(n):0}function tt(n=nt()){return n+" 🧶"}const ot=n({t:"r2"}),st=n({t:"t2"}),ct=n({t:"y2"}),rt=n({t:"u2"});let et=t({text:Y(5),t:["a","e"],i:()=>{s.l(0,{rn:1})}});function it(n){et.classList.toggle("a",!n),et.classList.toggle("C",n),n&&et.focus()}function ut(t=0){const o=pn.G&&K(),s=pn.G&&Q();ot.classList.toggle("p",!o);const c=An(pn.G),r=c&&s?" / "+(c<dn&&!t?c:"?"):"";st.innerHTML=`${Y(4)}: ${t?0:pn.G?.V.length??0}${r}`;const e=pn.G?.R._;ct.classList.toggle("p",!s||!e),ct.innerHTML=Y(3)+": ",ct.append(t?"?":n({t:at[e],text:en(e)})),rt.classList.toggle("p",0===pn.Z),rt.innerHTML=`${Y(25)}: ${Array.from({length:pn.Z},()=>"I").join("")}`}const at={[f]:"i2",[l]:"o2",[w]:"p2"};async function ft(t,s,c=.5,r=0){const e=n({o:t,t:"x"}),i=s.getBoundingClientRect(),u=i.right-document.body.clientWidth,a=i.top-i.height/2,f=i.width*c*-1;e.style.setProperty("transform",`translate(calc(50% + ${u+f}px), calc(50% + ${a}px)) scale(2)`),e.style.setProperty("filter",`hue-rotate(${r}deg)`),document.body.append(e),await A(0),e.classList.add("a"),o(e),await k(500),k(500).then(()=>{e.remove()})}const lt=n({t:"Z"}),wt=n({t:"X"});let dt,mt;const Ct=n({t:"w2"}),ht=[4,7,5,6],pt="hint",vt={ArrowUp:4,ArrowDown:5,ArrowLeft:6,ArrowRight:7,w:4,a:6,s:5,d:7,e:8,q:9,F1:pt};function yt(){for(const n of ht){const t=pn.G&&!un(pn.G,n);gt(n).disabled=t}}const bt={4:"N",7:"M",5:"_",6:"q2"};function xt(t){return n({tag:"kbd",text:Object.entries(vt).find(([n,o])=>o===t&&n.length<=2)?.[0].toUpperCase()})}const Mt={};function gt(n){return Mt[n]??=t({i:()=>Pt(n),t:["o",bt[n]]},[Qn(n),xt(n)])}function St(o){return Mt[o]??=t({i:()=>Pt(o)},[n({tag:"span"},[cn(o)]),xt(o)])}async function Pt(n){mt&&(mt.classList.remove("C"),mt=void 0),dt.disabled=0,await async function(n,t){if(!Gn&&void 0!==pn.G&&!Wn(pn.G)&&!zn(pn.G)&&un(n,t)){Gn=1;try{Yn(),n.V.push(t);const o=u(t)?async function(n,t){8===t&&(Vn(Pn(0),Y(21),1500),await k(300))}(0,t):Promise.resolve();Nn(n,n.W[0]),n.W=ln(n,t),Nn(n,n.W[0]),await o,pn.K=ln(n,9);const c=Wn(n),r=zn(n);no(n,pn.K,c),(c||r)&&(await k(300),Vn(Pn(0),Y(c?19:20)),s.l(2,{en:c}))}catch(o){}Gn=0}}(pn.G,n),ut(),Ot(),yt()}function Ot(){if(!pn.G)return;const n=Hn(pn.G,8);Ct.innerHTML=""+(n||""),St(8).classList.toggle(d,n>0)}function kt(){if(dt&&dt.classList.toggle("p",!pn.G||!Q()),!pn.G)return;const n=e.some(n=>G(n));wt.classList.toggle("p",!n);for(const t of e)St(t).classList.toggle("p",!G(t))}function At(n){var t;mt=u(t=n)?St(t):gt(t),mt.classList.add("C")}function Lt(n=5){const t=Sn(),o=$n();for(const s of z)U(s)&&!Z()||(o[s]={...t[s]});for(const s of m)o[s]=B(n);return{N:n,X:o,B:[]}}function It(n,t,o=0){let s=jn(n);s.X=function(n,t){const o=n.N,s=qn(o),c=n=>0===n.A,r=s.filter(n=>!(n=>0===n.A||0===n.L||n.A===o-1||n.L===o-1)(n)),e=s.filter(n=>!c(n)),i=t.un?s.filter(c):[{...N,L:In(n,t.an)}],u=_(r),a=_(e.filter(n=>!p(n,u))),f=Z()?_(i):null;return{...$n(),5:u,6:a,4:f}}(s,t);const c=rn(Un(s));m.forEach((n,t)=>{s.X[n]=c[t]??c[0]});let r,e=s.B;if(t.fn){const n=mn(s,{U:t.ln});if((n.H>t.an||n.H<3||n._>=3&&!(nt()>=100))&&o<13)return It(s,t,o+1);if(!t.ln&&n.H<t.an&&o<13){const c=n.H,u=jn(s),a={...N,L:In(u,c)},f=Un(u);if(i=a,!f.some(n=>p(n,i)))return It(s,t,o+1);u.X[4]=a;const l=mn(u);if(l.H!==c)return It(s,t,o+1);s=u,e=l.B,r=l._}else e=n.B,r=n._}var i;return{...s,X:s.X,B:e,_:r}}let Dt;const $t=[0,91,128,0,0,95,128,12,0,0,12,0,72,0,0,0,0,0,0,0,2,255,0,0,32,83,3,130,4],Tt={wn:[{dn:$t,mn:[1,2,2,3,3,2,2,2,1],c:[{n:[122,,,,127,,,,122,,,,127,,,,122,,,,126,,,,122,,,,127],f:[]},{n:[127,,134,,126,,134,,127,,134,,127,,,,127,,134,,126,,134,,127,,134,,127],f:[]},{n:[127,122,127,122,126,122,126,122,127,122,127,122,127,,,,127,122,127,122,126,122,126,122,127,122,126,122,127],f:[]}]},{dn:$t,mn:[,,2,1,1,2],c:[{n:[144,,141,141,142,,139,139,137,139,141,142,144,,,,144,144,141,141,142,142,139,139,137,,139,,137],f:[]},{n:[132,,129,129,130,,127,127,125,127,129,130,132,,,,132,132,129,129,130,130,127,127,125,,127,,125],f:[]}]}],Cn:22050,hn:32,pn:8,vn:2},jt={wn:[{dn:$t,mn:[1],c:[{n:[135,139,142,147],f:[]}]}],Cn:11025,hn:16,pn:1,vn:1},Et={wn:[{dn:$t,mn:[1],c:[{n:[129,126,123,,,,,,,,,,,,,,,,126,,,,,,,,,,,,,,,,129],f:[]}]}],Cn:11025,hn:16,pn:1,vn:1};var Wt=function(){var n,t,o,s,c,r=function(n){return.003959503758*2**((n-128)/12)},e=function(n,t,o){var s,c,e,u,a,f,l=i[n.dn[0]],w=n.dn[1],d=n.dn[3]/32,m=i[n.dn[4]],C=n.dn[5],h=n.dn[8]/32,p=n.dn[9],v=n.dn[10]*n.dn[10]*4,y=n.dn[11]*n.dn[11]*4,b=n.dn[12]*n.dn[12]*4,x=1/b,M=-n.dn[13]/16,g=n.dn[14],S=o*2**(2-n.dn[15]),P=new Int32Array(v+y+b),O=0,k=0;for(s=0,c=0;s<v+y+b;s++,c++)c>=0&&(c-=S,a=r(t+(15&(g=g>>8|(255&g)<<4))+n.dn[2]-128),f=r(t+(15&g)+n.dn[6]-128)*(1+8e-4*n.dn[7])),e=1,s<v?e=s/v:s>=v+y&&(e=(1-(e=(s-v-y)*x))*3**(M*e)),u=l(O+=a*e**d)*w,u+=m(k+=f*e**h)*C,p&&(u+=(2*Math.random()-1)*p),P[s]=80*u*e|0;return P},i=[function(n){return Math.sin(6.283184*n)}];this.init=function(r){n=r,t=r.pn,o=0,s=r.Cn*r.hn*(t+1)*2,c=new Int32Array(s)},this.yn=function(){var r,i,u,a,f,l,w,d,m,C,h,p,v,y,b=new Int32Array(s),x=n.wn[o],M=n.Cn,g=n.hn,S=0,P=0,O=0,k=[];for(u=0;u<=t;++u)for(w=x.mn[u],a=0;a<g;++a){var A=w?x.c[w-1].f[a]:0;A&&(x.dn[A-1]=x.c[w-1].f[a+g]||0,A<17&&(k=[]));var L=x.dn[20],I=43.23529*x.dn[21]*3.141592/44100,D=1-x.dn[22]/255,$=x.dn[24]/32,T=x.dn[25]/512,j=6.283184*2**(x.dn[26]-9)/M,E=x.dn[27]/255,W=x.dn[28]*M&-2;for(h=(u*g+a)*M,f=0;f<4;++f)if(l=w?x.c[w-1].n[a+f*g]:0){k[l]||(k[l]=e(x,l,M));var z=k[l];for(i=0,r=2*h;i<z.length;i++,r+=2)b[r]+=z[i]}for(i=0;i<M;i++)(C=b[d=2*(h+i)])||O?(P+=(p=1.5*Math.sin(p=I))*(v=D*(C-P)-(S+=p*P)),C=3==L?P:1==L?v:S,O=(C*=$)*C>1e-5,y=C*(1-(m=Math.sin(j*d)*T+.5)),C*=m):y=0,d>=W&&(y+=b[d-W+1]*E,C+=b[d-W]*E),b[d]=0|y,b[d+1]=0|C,c[d]+=0|y,c[d+1]+=0|C}return++o/n.vn},this.bn=function(){var n=44+2*s-8,t=n-36,o=new Uint8Array(44+2*s);o.set([82,73,70,70,255&n,n>>8&255,n>>16&255,n>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&t,t>>8&255,t>>16&255,t>>24&255]);for(var r=0,e=44;r<s;++r){var i=c[r];i=i<-32767?-32767:i>32767?32767:i,o[e++]=255&i,o[e++]=i>>8&255}return o}};let zt,Nt=0,Rt=0;function Ut(n){return new Promise(t=>{const o=setInterval(()=>{n.yn()>=1&&(clearInterval(o),t())},0)})}function qt(){return Nt=!Nt,function(n=Nt){const t=!zt.paused&&!zt.ended;n&&!t?zt.play():!n&&t&&zt.pause()}(),I("m",Nt?"false":"true"),Nt}let Bt=0;const Ht=n({t:"O"});function _t(o=0){var c;c=function(o=0){const c=Wn(pn.G)&&pn.G.V.length<=An(pn.G),r=!o&&Q()&&!c,e=c?function(){if(!pn.G)return 0;const n=pn.G.R._,t=n?Xn[n]:0,o=Q()?Ln(pn.G.R)-pn.G.V.length:0;return 10+-1*pn.Z+t+o}():0,i=n({t:"I"});s.subscribe(1,()=>{i.remove()});const u=t({text:Y(o?0:r?1:2),t:"q",i:async()=>{c&&await async function(n,t){k(500).then(()=>{s.l(6,t)}),await async function(n,t){const o=500/n;for(let s=0;s<n;s++){const c=s/n;ft("🧶",t,.5+(s%2==0?-1:1)*c*.3,360*c),await A(o)}}(t,n)}(u,e),s.l(0,{rn:0}),i.remove(),rt.classList.toggle("p",1)}});if(i.append(u),c){const t=n({text:"+"+tt(e),t:"P"});i.append(t)}if(r){const n=t({text:Y(5),t:"q",i:()=>{s.l(0,{rn:1}),i.remove()}});u.classList.remove("q"),i.append(n)}return i}(o),lt.append(c),lt.classList.toggle(d,1),wt.classList.toggle("a",1),dt.classList.toggle("a",1),c.querySelector("button.q").focus()}let Vt,Yt,Ft;const Gt=[];async function Kt(c){const r=sn();let e=0;Wn(pn.G)&&!c.rn&&function(){if(!bn())return void(pn.Y=void 0);pn.Y=pn.F;let n=pn.F+1;n>2&&(n=-1),pn.F=n,I("o",n.toString())}(),!r||bn()||c.rn||(e=await async function(){let c;const r=n({t:"S"}),e=n({text:Y(6)});r.append(e);const i=n({t:"G",text:Y(17)}),a=t({text:Y(27),t:"e",i:()=>{c=1,Dt?.close(1)}}),f=n({t:"D"}),l=function(){const n=on();return rn(n),n.slice(0,2)}(),w=l.map((n,s)=>function(r){const w=W(r)?9:u(r)?7:8;let d;W(r)&&(d=j(r).cloneNode(1),o(d));const m=t({t:"A",text:Y(w),i:t=>{W(r)?d.classList.add($(r)):t.target.innerHTML=u(r)?cn(r):H[r],function(t){if(c)return;a.remove(),i.innerHTML=Y(J[n]),i.classList.add("H"),e.innerHTML=Y(18),c=n,Dt&&Dt.xn.classList.remove("a");const o=t.target,r=0===s?f.lastElementChild:f.firstElementChild;2===l.length&&(o.style.setProperty("--t-x",0===s?"calc(50% + 1rem)":"calc(-50% - 1rem)"),r.classList.add("a")),o.classList.add("F")}(t)}});return d&&m.append(d),m}(n));return f.append(...w),r.append(f,i,a),Dt=function(o){const c=n({t:"s2",i:n=>n.stopPropagation()}),r=n({t:"f2"},[o]);function e(n){c.classList.remove("d2"),s.l(5,n)}const i=t({text:Y(2),t:"q",i:()=>e(1)});return c.append(r,n({t:"a2"},[i])),document.body.appendChild(c),{open:()=>(k(0).then(()=>c.classList.add("d2")),r.classList.toggle("g2",r.scrollHeight>r.clientHeight),new Promise(n=>{s.subscribe(5,n)})),close:n=>{e(n)},xn:i,destroy:()=>{c.remove()}}}(r),Dt.xn.classList.add("a"),Dt.open().then(n=>(n&&c&&function(n){const t=tn(),o=[...new Set([...t,...n])];I("k",o.join(",")),nn=o}(1==c?F:[c]),k(600).then(()=>Dt?.destroy()),n&&c||0))}()),Yn(),document.body.classList.remove("i"),Yt&&pn.F!==pn.Y&&void 0!==pn.Y&&2!==pn.Y&&(Yt.remove(),Yt=void 0,Ft?.remove(),Ft=void 0);const i=function(){const n=pn.F,t=xn[n];if(!t)return;const o=yn(t,{nn:1,J:1});return{Mn:{N:Mn[n],X:o.X,B:[]},gn:0===n?5:void 0}}();let a=function(n,t){if(n.Sn){let t;try{t=yn(n.Sn)}catch(s){}if(t)return t}let o;return o=n.rn&&pn.G?pn.G.R:t?t.Mn:null,o}(c,i);null===a&&(a=await async function(t=5){const o=async function(n=5){await k(0);const t=Lt(n),o=Math.random()<.8,s=Math.random()<.2;return{...It(t,{fn:Q(),un:0,ln:o,an:s?4:5})}}(t),s=async function(){if(!Yt)return;const t=n({t:"h",text:Y(23)});Yt.append(t);for(let n=0;n<2;n++){const n=kn(It(Lt(),{fn:0,un:1,ln:1,an:5})),t=ln(n,9);await Xt(n,t,0,1),await A(300)}t.remove()}(),[c]=await Promise.all([o,s]);return c}()),pn.Z=c.rn?pn.Z+1:0,await async function(n,t,o,c){pn.G=kn(n),pn.K=ln(pn.G,9),document.body.style.setProperty("--s-cnt",n.N.toString()),s.l(1),Yt||(Yt=Jt(n.N),Zt(),await A(300)),await Xt(pn.G,pn.K,0,c)}(a,0,0,!c.rn),function(n,t){n?.gn?At(n?.gn):t&&u(t)&&At(t)}(i,e)}function Zt(){Yt&&(Vt||(Vt=n({t:"j"}),document.body.append(Vt),Vt.addEventListener("scroll",()=>{Yn()})),Bt||(s.subscribe(2,()=>{Ht&&_t()}),s.subscribe(0,()=>{ut(1)}),s.subscribe(1,async()=>{await k(0),it(0),ut(),dt.disabled=0,Ot(),kt(),yt(),lt.classList.toggle(d,0),wt.classList.toggle("a",0),dt.classList.toggle("a",0)}),document.addEventListener("keydown",n=>{const t=vt[n.key];if(t)if(n.preventDefault(),function(...n){document.body.classList.add(...n)}("e2"),lt.classList.contains(d)){if(i(t)){const n=lt.querySelectorAll("& div button:not(.p)").values().toArray(),t=n.indexOf(document.activeElement);n[(t+1)%n.length]?.focus()}}else t===pt?dt.click():Pt(t)}),Bt=1),Ht.append((ot.append(st,ct,rt,et),ot),(lt.innerHTML="",lt.append(...ht.map(gt)),yt(),lt),function(){wt.innerHTML="";const n=St(8);return n.append(Ct),wt.append(n,St(9)),wt}(),dt??=t({t:"w",i:async()=>{if(!pn.G)return;dt.disabled=1,await ft(tt(-5),dt),s.l(6,-5);const n=function(){const n=(o=pn.G,o.R.B.filter(n=>o.V.every((t,o)=>n[o]===t)).map(n=>n.slice(o.V.length))).map(n=>n[0]),t={};var o,s;return n.forEach(n=>{t[n]=(t[n]||0)+1}),(s=n,s.filter((n,t)=>s.indexOf(n)===t)).sort((n,o)=>t[o]-t[n])[0]}();void 0!==n?At(n):it(1)}},[Y(24)," ",tt(-5),xt(pt)])),kt(),ut(),pn.G||bn()||_t(1),Ft=Ht,Vt.append(Yt,Ft))}function Qt(n){return Gt[n.A]?.[n.L]}function Jt(t){const o=n({t:"k"});Gt.length=0;for(let s=0;s<t;s++){const s=[],c=n({t:"l"});o.append(c);for(let o=0;o<t;o++){const t=n({t:"r"});c.append(t),s.push(t)}Gt.push(s)}return o}async function Xt(n,t,s,c){for(const r of Dn){const t=Pn(r),s=On(n.R,r);if(s){const n=Qt(s);n.contains(t)?c&&o(t):n.append(t),W(r)&&t.classList.toggle($(r),!h(r)||G(r))}}s||await A(300),no(n,t)}function no(n,t,o=0){for(const s of Dn){const c=Pn(s),r=On(n.R,s),e=n.W[s];if(null===r||null===e)continue;const[i,u]=v(e,r);if(c.style.transform=`translate(${100*u}%, ${100*i}%)`,U(s)){const t=!Bn(n,e,4)&&!o;document.body.classList.toggle("u",t),c.classList.toggle("a",t)}if(C.includes(s)&&t){const n=t[s],o=n?P(e,n):void 0,r=c.querySelector("."+Kn.tn);o?r?Jn(r,o):c.append(Qn(o)):r?.remove()}}}let to,oo,so,co;async function ro(n){const t=new Wt;t.init(n),await Ut(t);const o=t.bn();return URL.createObjectURL(new Blob([o],{type:"audio/wav"}))}const eo="true"===D("m");let io=0;function uo(n=nt()){co.innerText=tt(n)}(async()=>{(function(){if(io)return;io=1;const o=n({t:"f"});so=n({t:"d",text:"Kittens United"}),o.append(so);const c=n({t:"g"}),r=t({text:"📂",i:()=>{const n=pn.G?(t=pn.G.R,Object.entries(t.X).map(([n,t])=>t?`${vn[n]}${t.A}${t.L}`:"").join("")):"";var t;const o=window.prompt(Y(30),n);o&&Kt({Sn:o,rn:0})},t:["o","w"]});function e(){r.classList.toggle("a",sn())}c.append(r),e();{const n=t({text:eo?"🔇":"🔊",i:n=>{const t=qt();n.target.textContent=t?"🔊":"🔇"},t:["o","w"]});c.append(n)}co=n(),uo(),c.append(co),o.append(c),document.body.append(o),bn()||location.hash.length>1?Kt({rn:0}):async function(){if(Yt)return;Yt=Jt(5);const n=kn(Lt());await Xt(n,void 0,1,1),Zt()}(),s.subscribe(0,n=>{Kt(n)}),s.subscribe(2,n=>{n.en&&document.body.classList.add("i"),e();{const t=n.en?to:oo;t&&function(n,t=1){const o=new Audio(n);o.preload="auto",o.preservesPitch=0,o.playbackRate=t,o.play().catch(()=>{}),new Promise(n=>{o.addEventListener("ended",()=>n()),o.addEventListener("error",()=>n())})}(t)}}),s.subscribe(6,n=>{!function(n){nt();const t=function(n){const t=nt()+n;return I("x",t.toString()),t}(n);uo(t)}(n)})})(),await k(0),await async function(n){const t=new Wt;t.init(Tt),await Ut(t);const o=t.bn(),s=URL.createObjectURL(new Blob([o],{type:"audio/wav"}));zt=new Audio(s),zt.loop=1,zt.volume=.5,document.addEventListener("visibilitychange",()=>{zt.muted=document.hidden}),document.addEventListener("click",()=>{Rt||(Rt=1,!n&&qt())})}(eo),await async function(){to||(to=await ro(jt)),oo||(oo=await ro(Et))}()})();
